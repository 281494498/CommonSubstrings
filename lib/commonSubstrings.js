function e(e){return{source:new Set,listing:!1,label:e,horizontal:new Map,structure:new Map}}module.exports=function(r,t){void 0===t&&(t={minLength:3,minOccurrence:2});var n=t.minLength,u=t.minOccurrence,c=e(""),s=e("");!function(r,t,n,u){r.forEach(function(r,c){for(var s=[],i=function(i){var o=t;r.substring(i).split("").reduce(function(t,o,a){var l=a+1,f=r.substring(i,i+l);if(t.structure.has(o))t.structure.get(o).source.add(c);else{var h=e(f);h.source.add(c),t.structure.set(o,h)}if(t=t.structure.get(o),l>=u){if(i>0){var g=r.substring(i-1,l+i),v=s.shift();t.horizontal.set(g,v)}l>u?s.push(t):n.horizontal.set(f,t)}return t},o)},o=0;o<=r.length-u;o++)i(o);console.assert(0===s.length,"the last suffix list should be cleared")})}(r,c,s,n),function e(r,t,n){var u=Array.from(r.structure.entries()).reduce(function(r,u){var c=u[1],s=e(c,t,n);return c.label.length<=t?r:new Set(r.concat(s))},new Set);return r.label.length<t?u:new Set([].concat(r.source).filter(function(e){return!u.has(e)})).size>=n?(r.listing=!0,r.source):u}(c,n,u),function e(r,t){var n=Array.from(r.horizontal.entries()).reduce(function(r,n){var u=e(n[1],t);return new Set(r.concat(u))},new Set);return new Set([].concat(r.source).filter(function(e){return!n.has(e)})).size>=t?r.source:(r.listing=!1,n)}(s,u);var i=[];return function e(r,t){Array.from(r.structure.entries()).forEach(function(r){var n=r[1];e(n,t),n.listing&&t.push({source:Array.from(n.source),name:n.label,weight:n.source.size*n.label.length})})}(c,i),i};
//# sourceMappingURL=commonSubstrings.js.map
