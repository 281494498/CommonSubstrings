!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):e.commonSubstrings=r()}(this,function(){function e(e){return{source:new Set,listing:!1,label:e,horizontal:new Map,structure:new Map}}return function(r,t){void 0===t&&(t={minLength:3,minOccurrence:2});var n=t.minLength,u=t.minOccurrence,o=e(""),i=e("");!function(r,t,n,u){r.forEach(function(r,o){for(var i=[],c=function(c){var s=t;r.substring(c).split("").reduce(function(t,s,a){var f=a+1,l=r.substring(c,c+f);if(t.structure.has(s))t.structure.get(s).source.add(o);else{var h=e(l);h.source.add(o),t.structure.set(s,h)}if(t=t.structure.get(s),f>=u){if(c>0){var d=r.substring(c-1,f+c),g=i.shift();t.horizontal.set(d,g)}f>u?i.push(t):n.horizontal.set(l,t)}return t},s)},s=0;s<=r.length-u;s++)c(s);console.assert(0===i.length,"the last suffix list should be cleared")})}(r,o,i,n),function e(r,t,n){var u=Array.from(r.structure.entries()).reduce(function(r,u){var o=u[1],i=e(o,t,n);return o.label.length<=t?r:new Set(r.concat(i))},new Set);return r.label.length<t?u:new Set([].concat(r.source).filter(function(e){return!u.has(e)})).size>=n?(r.listing=!0,r.source):u}(o,n,u),function e(r,t){var n=Array.from(r.horizontal.entries()).reduce(function(r,n){var u=e(n[1],t);return new Set(r.concat(u))},new Set);return new Set([].concat(r.source).filter(function(e){return!n.has(e)})).size>=t?r.source:(r.listing=!1,n)}(i,u);var c=[];return function e(r,t){Array.from(r.structure.entries()).forEach(function(r){var n=r[1];e(n,t),n.listing&&t.push({source:Array.from(n.source),name:n.label,weight:n.source.size*n.label.length})})}(o,c),c}});
//# sourceMappingURL=commonSubstrings.umd.js.map
